{% extends 'greenMarket/bmain.html' %}

{% block title %}My Orders | GreenMarket{% endblock %}

{% block header_title %}
  My Orders
{% endblock %}

{% block content %}

<div class="bg-white rounded-lg shadow p-4">
  <h3 class="text-lg font-semibold mb-4">Order History</h3>

  <div class="overflow-x-auto">
    <table class="min-w-full text-sm text-left">
      <thead class="bg-green-600 text-white text-xs uppercase">
        <tr>
          <th class="px-6 py-3">Order ID</th>
          <th class="px-6 py-3">Product</th>
          <th class="px-6 py-3">Date</th>
          <th class="px-6 py-3">Quantity</th>
          <th class="px-6 py-3">Request </th>
          <th class="px-6 py-3">Amount</th>
        </tr>
      </thead>
      <tbody class="text-gray-700">

        {% for order in orders %}
        <tr class="border-b hover:bg-gray-50 transition">
          <td class="px-6 py-4">{{ order.order_id }}</td>
          <td class="px-6 py-4">
            {# Replace below with your actual product info logic #}
            {% if order.order_items.all %}
              {{ order.order_items.all.0.product.name }}
            {% else %}
              N/A
            {% endif %}
          </td>
          <td class="px-6 py-4">{{ order.order_date|date:"F d, Y" }}</td>
          <td class="px-6 py-4">
            {% if order.order_items.all %}
              {{ order.order_items.all.0.quantity }}
            {% else %}
              N/A
            {% endif %}
          </td>
          <td class="px-6 py-4">
            {% if order.status == 'pending' %}
              <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs">Pending</span>
            {% elif order.status == 'approved' %}
              <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs">Approved</span>
            {% elif order.status == 'rejected' %}
              <span class="bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs">Rejected</span>
            {% elif order.status == 'paid' %}
              <span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs">Paid</span>
            {% else %}
              <span>{{ order.status }}</span>
            {% endif %}
          </td>
          <td class="px-6 py-4 font-semibold">â‚¦{{ order.total_amount }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-6 py-4 text-center text-gray-500">No orders found.</td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>
</div>

{% endblock %}
